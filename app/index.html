<!doctype html>
<html>
<head>
	<meta charset="UTF-8">
	<title>itineraire-déchets</title>
	<meta name="description" content="">
	<meta name="viewport" content="width=device-width">

	<!-- build:css styles/vendor.css -->
	<link rel="stylesheet" href="lib/styles/leaflet.css">
	<link rel="stylesheet" href="bower_components/font-awesome/css/font-awesome.min.css">
	<!-- bower:css -->
	<!-- endbower -->
	<!-- endbuild -->

	<!-- build:css styles/main.css -->
	<link rel="stylesheet" href="styles/main.css">
	<!-- endbuild -->
	<link rel="shortcut icon" href="/favicon.ico">

    <script>
        /*!
         * @overview es6-promise - a tiny implementation of Promises/A+.
         * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
         * @license   Licensed under MIT license
         *            See https://raw.githubusercontent.com/jakearchibald/es6-promise/master/LICENSE
         * @version   2.0.0
         */
(function(){function r(a,b){n[l]=a;n[l+1]=b;l+=2;2===l&&A()}function s(a){return"function"===typeof a}function F(){return function(){process.nextTick(t)}}function G(){var a=0,b=new B(t),c=document.createTextNode("");b.observe(c,{characterData:!0});return function(){c.data=a=++a%2}}function H(){var a=new MessageChannel;a.port1.onmessage=t;return function(){a.port2.postMessage(0)}}function I(){return function(){setTimeout(t,1)}}function t(){for(var a=0;a<l;a+=2)(0,n[a])(n[a+1]),n[a]=void 0,n[a+1]=void 0;
l=0}function p(){}function J(a,b,c,d){try{a.call(b,c,d)}catch(e){return e}}function K(a,b,c){r(function(a){var e=!1,f=J(c,b,function(c){e||(e=!0,b!==c?q(a,c):m(a,c))},function(b){e||(e=!0,g(a,b))});!e&&f&&(e=!0,g(a,f))},a)}function L(a,b){1===b.a?m(a,b.b):2===a.a?g(a,b.b):u(b,void 0,function(b){q(a,b)},function(b){g(a,b)})}function q(a,b){if(a===b)g(a,new TypeError("You cannot resolve a promise with itself"));else if("function"===typeof b||"object"===typeof b&&null!==b)if(b.constructor===a.constructor)L(a,
b);else{var c;try{c=b.then}catch(d){v.error=d,c=v}c===v?g(a,v.error):void 0===c?m(a,b):s(c)?K(a,b,c):m(a,b)}else m(a,b)}function M(a){a.d&&a.d(a.b);x(a)}function m(a,b){void 0===a.a&&(a.b=b,a.a=1,0!==a.f.length&&r(x,a))}function g(a,b){void 0===a.a&&(a.a=2,a.b=b,r(M,a))}function u(a,b,c,d){var e=a.f,f=e.length;a.d=null;e[f]=b;e[f+1]=c;e[f+2]=d;0===f&&a.a&&r(x,a)}function x(a){var b=a.f,c=a.a;if(0!==b.length){for(var d,e,f=a.b,g=0;g<b.length;g+=3)d=b[g],e=b[g+c],d?C(c,d,e,f):e(f);a.f.length=0}}function D(){this.error=
null}function C(a,b,c,d){var e=s(c),f,k,h,l;if(e){try{f=c(d)}catch(n){y.error=n,f=y}f===y?(l=!0,k=f.error,f=null):h=!0;if(b===f){g(b,new TypeError("A promises callback cannot return that same promise."));return}}else f=d,h=!0;void 0===b.a&&(e&&h?q(b,f):l?g(b,k):1===a?m(b,f):2===a&&g(b,f))}function N(a,b){try{b(function(b){q(a,b)},function(b){g(a,b)})}catch(c){g(a,c)}}function k(a,b,c,d){this.n=a;this.c=new a(p,d);this.i=c;this.o(b)?(this.m=b,this.e=this.length=b.length,this.l(),0===this.length?m(this.c,
this.b):(this.length=this.length||0,this.k(),0===this.e&&m(this.c,this.b))):g(this.c,this.p())}function h(a){O++;this.b=this.a=void 0;this.f=[];if(p!==a){if(!s(a))throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof h))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");N(this,a)}}var E=Array.isArray?Array.isArray:function(a){return"[object Array]"===
Object.prototype.toString.call(a)},l=0,w="undefined"!==typeof window?window:{},B=w.MutationObserver||w.WebKitMutationObserver,w="undefined"!==typeof Uint8ClampedArray&&"undefined"!==typeof importScripts&&"undefined"!==typeof MessageChannel,n=Array(1E3),A;A="undefined"!==typeof process&&"[object process]"==={}.toString.call(process)?F():B?G():w?H():I();var v=new D,y=new D;k.prototype.o=function(a){return E(a)};k.prototype.p=function(){return Error("Array Methods must be provided an Array")};k.prototype.l=
function(){this.b=Array(this.length)};k.prototype.k=function(){for(var a=this.length,b=this.c,c=this.m,d=0;void 0===b.a&&d<a;d++)this.j(c[d],d)};k.prototype.j=function(a,b){var c=this.n;"object"===typeof a&&null!==a?a.constructor===c&&void 0!==a.a?(a.d=null,this.g(a.a,b,a.b)):this.q(c.resolve(a),b):(this.e--,this.b[b]=this.h(a))};k.prototype.g=function(a,b,c){var d=this.c;void 0===d.a&&(this.e--,this.i&&2===a?g(d,c):this.b[b]=this.h(c));0===this.e&&m(d,this.b)};k.prototype.h=function(a){return a};
k.prototype.q=function(a,b){var c=this;u(a,void 0,function(a){c.g(1,b,a)},function(a){c.g(2,b,a)})};var O=0;h.all=function(a,b){return(new k(this,a,!0,b)).c};h.race=function(a,b){function c(a){q(e,a)}function d(a){g(e,a)}var e=new this(p,b);if(!E(a))return (g(e,new TypeError("You must pass an array to race.")), e);for(var f=a.length,h=0;void 0===e.a&&h<f;h++)u(this.resolve(a[h]),void 0,c,d);return e};h.resolve=function(a,b){if(a&&"object"===typeof a&&a.constructor===this)return a;var c=new this(p,b);
q(c,a);return c};h.reject=function(a,b){var c=new this(p,b);g(c,a);return c};h.prototype={constructor:h,then:function(a,b,c){var d=this.a;if(1===d&&!a||2===d&&!b)return this;this.d=null;var e=new this.constructor(p,c),f=this.b;if(d){var g=arguments[d-1];r(function(){C(d,e,g,f)})}else u(this,e,a,b);return e},"catch":function(a,b){return this.then(null,a,b)}};var z={Promise:h,r:function(){var a;a="undefined"!==typeof global?global:"undefined"!==typeof window&&window.document?window:self;"Promise"in
a&&"resolve"in a.Promise&&"reject"in a.Promise&&"all"in a.Promise&&"race"in a.Promise&&function(){var b;new a.Promise(function(a){b=a});return s(b)}()||(a.Promise=h)}};"function"===typeof define&&define.amd?define(function(){return z}):"undefined"!==typeof module&&module.exports?module.exports=z:"undefined"!==typeof this&&(this.ES6Promise=z)}).call(this);

        </script>
        <script>
            // pending https://github.com/jakearchibald/es6-promise/issues/59
            if(typeof Promise !== 'function')
                Promise = ES6Promise.Promise;
        </script>
    
        <script>
            if(typeof Number.isNaN !== "function"){
                Number.isNaN = function(x){
                    return x !== x;
                }
            }
        </script>
    
</head>
<body>

    <h1>Transport des déchets&nbsp;: Quel impact sur notre environnement ?</h1>
    <main>
        <div class="right-column">
            <div class="controls">
                <nav class="dechets">
                    <div class="checkboxes">
                        <label for="centre-epci">
                            <input type="checkbox" id="centre-epci" class="toggable epci">
                            <span>Intercommunalités</span>
                        </label>
                        <label for="centre-transfert">
                            <input type="checkbox" id="centre-transfert" class="toggable transfert">
                            <span>Centre de Transfert</span>
                        </label>
                        <label for="centre-traitement">
                            <input type="checkbox" id="centre-traitement" class="toggable traitement">
                            <span>Centre de Traitement</span>
                        </label>
                        <label for="route">
                            <input type="checkbox" id="route" class="route toggable">
                            <i class="fa fa-random"></i>
                            Trajets
                        </label>
                        <label for="emission">
                            <input type="checkbox" id="emission" class="emission ">
                            <span class="fa-stack">
                              <i class="fa fa-cloud fa-stack-1x"></i>
                              <i class="fa fa-cloud fa-stack-50pc fa-flip-horizontal"></i>
                            </span>
                            Émission de CO<sub>2</sub> (<abbr title="Kilograms">kg</abbr>)
                        </label>
                        <label for="qte">
                            <input type="checkbox" id="qte" class="qte toggable">
                            <i class="fa fa-tachometer"></i>
                            Quantité traitée (<abbr title="Tonnes">t</abbr>)
                        </label>

                        <label for="dist">
                            <input type="checkbox" id="dist" class="dist toggable">
                            <i class="fa fa-road"></i>
                            Distance (<abbr title="Kilometers">km</abbr>)
                        </label>
                    </div>
                </nav>
                <section class="counter">
                    <table class="compteurs" summary="Totaux ou valeurs instantanés des mesures">
                        <tr>
                            <th>Distance parcourue</th>
                            <th>Émission de CO<sub>2</sub></th>
                            <th>Quantité traités</th>
                        </tr>
                        <tr class="total">
                            <td class="dist">
                                <!-- <i class="fa fa-road"></i> -->
                                <span class="value">-</span>
                                <abbr class="unit" title="Kilometer">km</abbr>
                            </td>
                            <td class="emission">
                                <!-- <span class="fa-stack">
                                  <i class="fa fa-cloud fa-stack-1x"></i>
                                  <i class="fa fa-cloud fa-stack-50pc fa-flip-horizontal"></i>
                                </span> -->
                                <span class="value">-</span>
                                <abbr class="unit" title="Kilogram">kg</abbr>
                            </td>
                            <td class="qte">
                                <span class="value">-</span>
                                <abbr class="unit" title="tonne">t</abbr>
                            </td>
                    </table>
                </section>
            </div>
            <div class="map-app">
                <div id="map" class="map"></div>
            </div>
        </div>



        <div class="middle-column">
            <div class="flow-app">
                <!-- Sankey Graph -->
            </div>
        </div>
    </main>

	<div class="metadata leaflet-bottom leaflet-right">
		<p class="leaflet-control-attribution leaflet-control">
		by
		<a href="https://twitter.com/edouard_lopez">
			<i class="fa fa-twitter"></i>
			@Edouard_Lopez
		</a>,
		<i class="fa fa-github fa-lg"></i><a href="https://github.com/edouard-lopez/ECV-IJBA"> Fork me!</a>.
		Using
		<a href="http://leafletjs.com/">Leaflet</a>,
		<a href="http://d3js.org/">D3.js</a>,
		and data from
		<a href="http://metadata.lacub.fr/">La <abbr title="Communauté Urbaine de Bordeaux (Gironde)">CUB</abbr></a>,
		<a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>.
		</p>
	</div>


    <!-- build:js scripts/vendor.js -->
    <script src="lib/scripts/leaflet.js"></script>
    <script src="bower_components/jquery/dist/jquery.js"></script>
    <script src="bower_components/es6-promise/promise.js"></script>
    <script src="bower_components/d3/d3.js"></script>
    <script src="bower_components/d3-plugins/sankey/sankey.js"></script>
    <script src="bower_components/topojson/topojson.js"></script>
    <script src="scripts/jquery.svg.min.js"></script>
    <script src="scripts/jquery.svgdom.min.js"></script>
	<!-- endbuild -->
	<!-- build:js scripts/main.js -->
	<script src="scripts/pointsP.js"></script>
	<script src="scripts/getTopoJSON.js"></script>
	<script src="scripts/trajetsP.js"></script>
	<script src="scripts/epci2centre.js"></script>
	<script src="scripts/ui.utils.js"></script>
	<script src="scripts/str.utils.js"></script>
	<script src="scripts/convert.utils.js"></script>
	<script src="scripts/map-app.js"></script>
	<script src="scripts/flow-app.js"></script>
	<script src="scripts/main.js"></script>
	<!-- endbuild -->

	<script type="text/javascript">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-15879983-5']);
		_gaq.push(['_trackPageview']);

		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
	</script>
</body>
</html>
